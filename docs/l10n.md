ë‹¤êµ­ì–´ ì ìš© ì§€ì¹¨:
- ë³¸ ë¬¸ì„œëŠ” ì˜ì–´, í•œêµ­ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´ ë“±ì˜ ë‹¤êµ­ì–´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•œ ì§€ì¹¨ì„ ì œê³µí•©ë‹ˆë‹¤.
- ë‹¤êµ­ì–´ ì ìš©ì„ í•  ë•Œì—ëŠ” ë°˜ë“œì‹œ ë³¸ ì§€ì¹¨ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.

# ë‹¤êµ­ì–´ ì ìš© ê°œìš”

1. ë‹¤êµ­ì–´ ì§€ì›ì„ ìœ„í•´ Next-Intl 4.0 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
2. ì§€ì› ì–¸ì–´: ì˜ì–´(en), í•œêµ­ì–´(ko), ì¼ë³¸ì–´(ja), ì¤‘êµ­ì–´(zh)
3. ê³µì‹ ë¬¸ì„œ ì°¸ê³ :
   - https://next-intl.dev/docs/getting-started/app-router
   - https://next-intl.dev/docs/usage/translations
   - https://next-intl.dev/docs/usage/numbers
   - https://next-intl.dev/docs/usage/dates-times
   - https://next-intl.dev/docs/usage/lists
   - https://next-intl.dev/docs/usage/configuration
   - https://next-intl.dev/docs/routing/setup
   - https://next-intl.dev/docs/routing/configuration
   - https://github.com/amannn/next-intl

---

## ëª©ì°¨
- [ê³µì‹ ë¬¸ì„œ ìš”ì•½](#ê³µì‹-ë¬¸ì„œ-ìš”ì•½)
- [ë³¸ í”„ë¡œì íŠ¸ ë¼ìš°íŒ… ì „ëµ](#ë³¸-í”„ë¡œì íŠ¸-ë¼ìš°íŒ…-ì „ëµ) â­ **í•„ìˆ˜ í™•ì¸**
- [1. ì„¤ì¹˜ ë° ì´ˆê¸° ì„¤ì •](#1-ì„¤ì¹˜-ë°-ì´ˆê¸°-ì„¤ì •)
- [2. ë””ë ‰í† ë¦¬ êµ¬ì¡°](#2-ë””ë ‰í† ë¦¬-êµ¬ì¡°)
- [3. Cookie-based ë¼ìš°íŒ… ì„¤ì • (localePrefix: 'never')](#3-cookie-based-ë¼ìš°íŒ…-ì„¤ì •-localeprefix-never)
- [4. ì–¸ì–´ ìŠ¤ìœ„ì²˜ êµ¬í˜„ (ì¿ í‚¤ ê¸°ë°˜)](#4-ì–¸ì–´-ìŠ¤ìœ„ì²˜-êµ¬í˜„-ì¿ í‚¤-ê¸°ë°˜)
- [5. ìºì‹œ í™˜ê²½ ì£¼ì˜ì‚¬í•­](#5-ìºì‹œ-í™˜ê²½-ì£¼ì˜ì‚¬í•­)
- [6. ë™ì‘ íë¦„](#6-ë™ì‘-íë¦„)
- [7. ë²ˆì—­ ì‚¬ìš©ë²•](#7-ë²ˆì—­-ì‚¬ìš©ë²•)
- [8. ìˆ«ì í¬ë§·íŒ…](#8-ìˆ«ì-í¬ë§·íŒ…)
- [9. ë‚ ì§œ/ì‹œê°„ í¬ë§·íŒ…](#9-ë‚ ì§œì‹œê°„-í¬ë§·íŒ…)
- [10. ë¦¬ìŠ¤íŠ¸ í¬ë§·íŒ…](#10-ë¦¬ìŠ¤íŠ¸-í¬ë§·íŒ…)
- [11. ë³¸ í”„ë¡œì íŠ¸ ì ìš© ê°€ì´ë“œ](#11-ë³¸-í”„ë¡œì íŠ¸-ì ìš©-ê°€ì´ë“œ)
- [Quick Reference](#quick-reference)
- [ì°¸ê³  ìë£Œ](#ì°¸ê³ -ìë£Œ)

---

## ê³µì‹ ë¬¸ì„œ ìš”ì•½

| ë¬¸ì„œ | í•µì‹¬ ìš”ì•½ | í”„ë¡œì íŠ¸ ì ìš© ë©”ëª¨ |
| --- | --- | --- |
| [Getting Started Â· App Router](https://next-intl.dev/docs/getting-started/app-router) | `createNextIntlPlugin`ìœ¼ë¡œ Next.js ì„¤ì •ì„ í™•ì¥í•˜ê³ , `getRequestConfig`ë¡œ ìš”ì²­ ë‹¨ìœ„ ë©”ì‹œì§€/í¬ë§·ì„ ë¡œë”©í•©ë‹ˆë‹¤. `NextIntlClientProvider`ë¥¼ ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì—ì„œ ê°ì‹¸ í´ë¼ì´ì–¸íŠ¸ í›…ì´ ë™ì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤. | `next.config.ts`ì— í”ŒëŸ¬ê·¸ì¸ì„ ì ìš©í•˜ê³  `app/[locale]/layout.tsx`ì—ì„œ `NextIntlClientProvider`ë¥¼ ì‚¬ìš©í•´ ê³µí†µ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. |
| [Usage Â· Translations](https://next-intl.dev/docs/usage/translations) | `useTranslations`, `getTranslations`, `createTranslator`, `useMessages` ë“± ë²ˆì—­ APIë¥¼ ì œê³µí•˜ë©°, ì¤‘ì²© í‚¤, ë³€ìˆ˜ ì‚½ì…, ë³µìˆ˜í˜•, ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì²˜ë¦¬ ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤. | ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `getTranslations`, í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” `useTranslations`ë¥¼ ì‚¬ìš©í•˜ê³ , ë¦¬ì¹˜ í…ìŠ¤íŠ¸ëŠ” `t.rich`ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•´ ë©”ì‹œì§€ í¬ê¸°ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤. |
| [Usage Â· Numbers](https://next-intl.dev/docs/usage/numbers) | `useFormatter().number`ì™€ ê¸€ë¡œë²Œ `formats` ì„¤ì •ì„ í†µí•´ í†µí™”, ë°±ë¶„ìœ¨, ë¶„ìˆ˜ ìë¦¿ìˆ˜ ë“±ì„ ë‹¤êµ­ì–´ì— ë§ê²Œ ì¼ê´€ë˜ê²Œ í¬ë§·í•©ë‹ˆë‹¤. | `app.config.ts` ë“±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°€ê²©, ì¹´ìš´íŠ¸ ê°’ì— `format.number`ë¥¼ ì ìš©í•˜ê³ , `price`, `compact` ê°™ì€ ì‚¬ì „ ì •ì˜ í¬ë§·ì„ í”„ë¡œì íŠ¸ ì „ì—­ì—ì„œ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. |
| [Usage Â· Dates & Times](https://next-intl.dev/docs/usage/dates-times) | `useFormatter().dateTime`, `relativeTime`, `time`, `useNow` í›…ì„ ì œê³µí•˜ì—¬ ì‹œê°„ëŒ€ ë° ìƒëŒ€ ì‹œê°ì„ ì²˜ë¦¬í•˜ê³  ìë™ ì—…ë°ì´íŠ¸ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. | ê²Œì‹œê¸€/ì±„íŒ… íƒ€ì„ìŠ¤íƒ¬í”„ëŠ” `format.relativeTime`ê³¼ `useNow`ë¥¼ í™œìš©í•˜ê³ , ê³ ì • í¬ë§·ì€ `formats.dateTime`ì— ë“±ë¡í•´ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤. |
| [Usage Â· Lists](https://next-intl.dev/docs/usage/lists) | `format.list`ë¡œ and/or ì¡°í•©, ë‹¨ìˆœ ë‚˜ì—´ ë“± ì–¸ì–´ë³„ ë¬¸ë²•ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. React ìš”ì†Œë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬í•´ë„ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§ë©ë‹ˆë‹¤. | í¬ëŸ¼ ì¹´í…Œê³ ë¦¬, ì‚¬ìš©ì íƒœê·¸, ê´€ì‹¬ì‚¬ ë“±ì„ ë‚˜ì—´í•  ë•Œ `format.list`ë¥¼ ì‚¬ìš©í•˜ë©´ í•˜ë“œì½”ë”©ëœ êµ¬ë‘ì ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
| [Usage Â· Configuration](https://next-intl.dev/docs/usage/configuration) | `NextIntlClientProvider` ì˜µì…˜, `formats`, `defaultTranslationValues`, `timeZone` ë“±ì„ ì¡°ì •í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. | ê¸°ë³¸ localeì€ `ko`, ì‹œê°„ëŒ€ëŠ” `Asia/Seoul`ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê³ , ê³µí†µ í¬ë§·ì„ `app/i18n/config.ts` ê°™ì€ ì¤‘ì•™ íŒŒì¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. |
| [Routing Â· Setup](https://next-intl.dev/docs/routing/setup) | `defineRouting`, `createNavigation`, `createMiddleware`ë¥¼ ì •ì˜í•´ ë¡œì¼€ì¼ ê¸°ë°˜ ë¼ìš°íŒ…ê³¼ ë‚´ë¹„ê²Œì´ì…˜ í—¬í¼ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤. | `src/i18n/routing.ts`ì™€ `app/navigation.ts`ë¥¼ ìƒì„±í•´ `Link`, `useRouter` ë“± ë‚´ë¹„ê²Œì´ì…˜ ìœ í‹¸ì„ locale ì¸ì§€ ë²„ì „ìœ¼ë¡œ êµì²´í•˜ê³ , ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ locale ê°ì§€ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. |
| [Routing Â· Configuration](https://next-intl.dev/docs/routing/configuration) | `localePrefix`, `pathnames`, `localeDetection`, `domains` ë“± ë¼ìš°íŒ… ë™ì‘ì„ ì„¸ë°€í•˜ê²Œ ì¡°ì •í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤. | ê¸°ë³¸ localeëŠ” ì ‘ë‘ì‚¬ë¥¼ ìƒëµ(`as-needed`), `/forum/list` ê°™ì€ ê²½ë¡œëŠ” `pathnames`ë¡œ ì„ ì–¸í•˜ì—¬ ì •ì ì¸ URL ë§¤í•‘ì„ ìœ ì§€í•˜ê³ , ì„œë²„ ì‚¬ì´ë“œì—ì„œ í•„ìš”í•˜ë©´ `localeDetection: false`ë¡œ ê³ ì •í•©ë‹ˆë‹¤. |

---

## ë³¸ í”„ë¡œì íŠ¸ ë¼ìš°íŒ… ì „ëµ

### âŒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹

ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ìŒ ë°©ì‹ì„ **ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**:

1. **Prefix-based routing (URLì— ë¡œì¼€ì¼ í¬í•¨)**
   - âŒ `/en/forum/list`
   - âŒ `/ko/forum/list`
   - âŒ `/ja/about-us`

2. **Domain-based routing (ë„ë©”ì¸ë³„ ì–¸ì–´ ë¶„ë¦¬)**
   - âŒ `en.vibers.kr/forum/list`
   - âŒ `ko.vibers.kr/forum/list`

### âœ… ë³¸ í”„ë¡œì íŠ¸ ë°©ì‹: Cookie-based Locale Detection

**í•µì‹¬ ê°œë…:**
- **URLì€ í•­ìƒ ê³ ì •**: `/forum/list`, `/about-us` (locale ì ‘ë‘ì‚¬ ì—†ìŒ)
- **ë¡œì¼€ì¼ ì €ì¥ì†Œ**: NEXT_LOCALE ì¿ í‚¤
- **ì „ëµ**: `localePrefix: 'never'`

**ë¡œì¼€ì¼ ê°ì§€ ìˆœì„œ:**
1. ğŸª **NEXT_LOCALE ì¿ í‚¤** (ìµœìš°ì„ )
   - ì‚¬ìš©ìê°€ ëª…ì‹œì ìœ¼ë¡œ ì„ íƒí•œ ì–¸ì–´
   - 1ë…„ê°„ ìœ ì§€
2. ğŸŒ **Accept-Language í—¤ë”**
   - ë¸Œë¼ìš°ì € ì–¸ì–´ ì„¤ì •
   - ì²« ë°©ë¬¸ ì‹œ ìë™ ê°ì§€
3. ğŸ‡°ğŸ‡· **defaultLocale('ko')**
   - ìœ„ ë‘ ê°€ì§€ ëª¨ë‘ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’

### ì¥ë‹¨ì 

**âœ… ì¥ì :**
- **URL ì¼ê´€ì„± ìœ ì§€**: ì–¸ì–´ì™€ ë¬´ê´€í•˜ê²Œ ë™ì¼í•œ URL êµ¬ì¡°
- **ì–¸ì–´ ì „í™˜ ê°„í¸**: URL ë³€ê²½ ì—†ì´ ì¿ í‚¤ë§Œ ìˆ˜ì •
- **SEO ì„¤ì • ë‹¨ìˆœ**: ë‹¨ì¼ URL êµ¬ì¡°ë¡œ ê´€ë¦¬ ìš©ì´
- **ê³µìœ  ë§í¬ ì•ˆì •**: ì–¸ì–´ ì ‘ë‘ì‚¬ ì—†ì–´ ë§í¬ ê³µìœ  ê°„í¸

**âŒ ë‹¨ì :**
- **ì–¸ì–´ë³„ URL ì¸ë±ì‹± ë¶ˆê°€**: ê²€ìƒ‰ ì—”ì§„ì´ ì–¸ì–´ë³„ë¡œ URLì„ êµ¬ë¶„í•  ìˆ˜ ì—†ìŒ
- **ê³µìœ  ë§í¬ì— ì–¸ì–´ ì •ë³´ ì—†ìŒ**: ë§í¬ë¥¼ ë°›ì€ ì‚¬ëŒì€ ìì‹ ì˜ ë¸Œë¼ìš°ì € ì„¤ì •ì— ë”°ë¼ ì–¸ì–´ê°€ ê²°ì •ë¨
- **ì–¸ì–´ ì „í™˜ ì‹œ ìƒˆë¡œê³ ì¹¨ í•„ìš”**: ì¿ í‚¤ ì„¤ì • í›„ í˜ì´ì§€ë¥¼ ë¦¬ë¡œë“œí•´ì•¼ ë°˜ì˜ë¨

### ì‚¬ìš© ì˜ˆì‹œ

**ë™ì¼í•œ URL, ë‹¤ë¥¸ ì–¸ì–´:**
```
URL: https://www.vibers.kr/forum/list

ì‚¬ìš©ì A (ì¿ í‚¤: NEXT_LOCALE=ko)  â†’ í•œêµ­ì–´ë¡œ í‘œì‹œ
ì‚¬ìš©ì B (ì¿ í‚¤: NEXT_LOCALE=en)  â†’ ì˜ì–´ë¡œ í‘œì‹œ
ì‚¬ìš©ì C (ì¿ í‚¤: NEXT_LOCALE=ja)  â†’ ì¼ë³¸ì–´ë¡œ í‘œì‹œ
ì‚¬ìš©ì D (ì¿ í‚¤ ì—†ìŒ, ë¸Œë¼ìš°ì €: zh-CN) â†’ ì¤‘êµ­ì–´ë¡œ í‘œì‹œ
```

---

## 1. ì„¤ì¹˜ ë° ì´ˆê¸° ì„¤ì •

### íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
npm install next-intl
```

âš ï¸ **ì°¸ê³ **: ë³¸ í”„ë¡œì íŠ¸ì—ëŠ” Next-Intl 4.0ì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### next.config.ts ì„¤ì •
```typescript
import createNextIntlPlugin from 'next-intl/plugin';

const withNextIntl = createNextIntlPlugin();

export default withNextIntl({
  // ê¸°ì¡´ Next.js ì„¤ì •
});
```

### ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ êµ¬ì„±

`NextIntlClientProvider`ëŠ” í´ë¼ì´ì–¸íŠ¸ í›…(`useTranslations`, `useFormatter` ë“±)ì´ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë©”ì‹œì§€, locale, ì˜µì…˜ì„ ì „ë‹¬í•©ë‹ˆë‹¤.

```tsx
// app/[locale]/layout.tsx
import {NextIntlClientProvider} from 'next-intl';
import {notFound} from 'next/navigation';
import {getMessages} from 'next-intl/server';
import {routing} from '@/i18n/routing';

export default async function LocaleLayout({
  children,
  params: {locale},
}: {
  children: React.ReactNode;
  params: {locale: string};
}) {
  if (!routing.locales.includes(locale)) {
    notFound();
  }

  const messages = await getMessages();

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider
          messages={messages}
          locale={locale}
          timeZone="Asia/Seoul"
        >
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

> `timeZone`ëŠ” [configuration ë¬¸ì„œ](https://next-intl.dev/docs/usage/configuration)ì˜ ê¶Œì¥ê°’ì„ ë”°ë¼ `Asia/Seoul`ì„ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í•˜ë˜, ì‚¬ìš©ì ì„¤ì •ì´ ìˆë‹¤ë©´ `request.ts`ì—ì„œ ë™ì ìœ¼ë¡œ ì£¼ì…í•©ë‹ˆë‹¤.

---

## 2. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
â”œâ”€â”€ messages/               # ë²ˆì—­ íŒŒì¼ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ en.json            # ì˜ì–´ ë²ˆì—­
â”‚   â”œâ”€â”€ ko.json            # í•œêµ­ì–´ ë²ˆì—­
â”‚   â”œâ”€â”€ ja.json            # ì¼ë³¸ì–´ ë²ˆì—­
â”‚   â””â”€â”€ zh.json            # ì¤‘êµ­ì–´ ë²ˆì—­
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ request.ts     # ìš”ì²­ë³„ ì„¤ì • ê°ì²´ ìƒì„±
â”‚   â”‚   â””â”€â”€ routing.ts     # ë¼ìš°íŒ… ì„¤ì • (ì§€ì› ì–¸ì–´, ê¸°ë³¸ locale)
â”‚   â”œâ”€â”€ middleware.ts       # locale ê°ì§€ ë° ë¼ìš°íŒ…
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ [locale]/      # locale ë™ì  ì„¸ê·¸ë¨¼íŠ¸
â”‚       â”‚   â”œâ”€â”€ layout.tsx # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚       â”‚   â””â”€â”€ page.tsx   # í˜ì´ì§€
â”‚       â””â”€â”€ navigation.ts  # ë¼ìš°íŒ… ìœ í‹¸ë¦¬í‹°
â””â”€â”€ next.config.ts
```

### i18n/request.ts
ìš”ì²­ë³„ ì„¤ì • ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ localeê³¼ ë©”ì‹œì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```typescript
import {getRequestConfig} from 'next-intl/server';

export default getRequestConfig(async ({locale}) => {
  return {
    locale,
    messages: (await import(`../../messages/${locale}.json`)).default
  };
});
```

### messages/ko.json ì˜ˆì‹œ
```json
{
  "common": {
    "submit": "ì „ì†¡",
    "cancel": "ì·¨ì†Œ",
    "save": "ì €ì¥",
    "delete": "ì‚­ì œ"
  },
  "auth": {
    "login": "ë¡œê·¸ì¸",
    "signup": "íšŒì›ê°€ì…",
    "logout": "ë¡œê·¸ì•„ì›ƒ"
  },
  "forum": {
    "title": "í¬ëŸ¼",
    "createPost": "ê¸€ì“°ê¸°",
    "noPost": "ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤"
  }
}
```

---

## 3. Cookie-based ë¼ìš°íŒ… ì„¤ì • (localePrefix: 'never')

### 3.1 i18n/routing.ts ì„¤ì •

**íŒŒì¼ ê²½ë¡œ**: `i18n/routing.ts`

```typescript
import {defineRouting} from 'next-intl/routing';

export const routing = defineRouting({
  locales: ['en', 'ko', 'ja', 'zh'],     // ì§€ì› ì–¸ì–´
  defaultLocale: 'ko',                    // ë¯¸ì§€ì›/ë¯¸ì§€ì • ì‹œ í•œêµ­ì–´ë¡œ í´ë°±
  localePrefix: 'never'                  // â­ í•µì‹¬: URLì— ë¡œì¼€ì¼ ì ‘ë‘ì–´ë¥¼ ì ˆëŒ€ ë¶™ì´ì§€ ì•ŠìŒ
});
```

**âš ï¸ ì¤‘ìš”:**
- `localePrefix: 'never'`ë¥¼ ì‚¬ìš©í•˜ë©´ **ì¿ í‚¤ê°€ ë¡œì¼€ì¼ì˜ ë‹¨ì¼ ì†ŒìŠ¤**ê°€ ë©ë‹ˆë‹¤
- URLì€ í•­ìƒ `/forum/list`, `/about-us` í˜•ì‹ìœ¼ë¡œ ê³ ì •ë©ë‹ˆë‹¤
- ë¡œì¼€ì¼ ì •ë³´ëŠ” NEXT_LOCALE ì¿ í‚¤ì— ì €ì¥ë©ë‹ˆë‹¤

### 3.2 middleware.ts ì„¤ì •

**íŒŒì¼ ê²½ë¡œ**: `middleware.ts` (í”„ë¡œì íŠ¸ ë£¨íŠ¸)

```typescript
import createMiddleware from 'next-intl/middleware';
import {routing} from './i18n/routing';

export default createMiddleware(routing);

// ì •ì  íŒŒì¼/APIë¥¼ ì œì™¸í•œ ëª¨ë“  ê²½ë¡œì— ì ìš©
export const config = {
  matcher: ['/((?!api|_next|_vercel|.*\\..*).*)']
};
```

**ë¯¸ë“¤ì›¨ì–´ ë™ì‘:**
1. **ì¿ í‚¤ í™•ì¸**: `NEXT_LOCALE` ì¿ í‚¤ê°€ ìˆëŠ”ì§€ ë¨¼ì € í™•ì¸
2. **Accept-Language ê°ì§€**: ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ ë¸Œë¼ìš°ì €ì˜ `Accept-Language` í—¤ë” í™•ì¸
3. **ê¸°ë³¸ê°’ í´ë°±**: ìœ„ ë‘ ê°€ì§€ ëª¨ë‘ ì—†ìœ¼ë©´ `defaultLocale('ko')` ì‚¬ìš©
4. **ë¡œì¼€ì¼ ì ìš©**: ê°ì§€ëœ ë¡œì¼€ì¼ì„ ìš”ì²­ ì»¨í…ìŠ¤íŠ¸ì— ì„¤ì •

**matcher ì„¤ì • ì„¤ëª…:**
- `/api/*`: API ë¼ìš°íŠ¸ ì œì™¸
- `/_next/*`: Next.js ë‚´ë¶€ íŒŒì¼ ì œì™¸
- `/_vercel/*`: Vercel ì‹œìŠ¤í…œ íŒŒì¼ ì œì™¸
- `.*\\..*`: ì •ì  íŒŒì¼ (ì´ë¯¸ì§€, CSS, JS ë“±) ì œì™¸

### 3.3 app/layout.tsx ì„¤ì •

**íŒŒì¼ ê²½ë¡œ**: `app/layout.tsx`

```typescript
import {NextIntlClientProvider} from 'next-intl';
import {getLocale, getMessages} from 'next-intl/server';

export default async function RootLayout({
  children
}: {
  children: React.ReactNode
}) {
  // ë¯¸ë“¤ì›¨ì–´ê°€ ê°ì§€í•œ ë¡œì¼€ì¼ ê°€ì ¸ì˜¤ê¸°
  const locale = await getLocale();

  // í•´ë‹¹ ë¡œì¼€ì¼ì˜ ë²ˆì—­ ë©”ì‹œì§€ ë¡œë“œ
  const messages = await getMessages();

  return (
    <html lang={locale}>
      <body>
        <NextIntlClientProvider locale={locale} messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

**ì£¼ì˜ì‚¬í•­:**
- `getLocale()`ì€ ë¯¸ë“¤ì›¨ì–´ê°€ ì„¤ì •í•œ ë¡œì¼€ì¼ì„ ë°˜í™˜í•©ë‹ˆë‹¤
- `getMessages()`ëŠ” `i18n/request.ts`ì—ì„œ ì •ì˜í•œ ë°©ì‹ëŒ€ë¡œ ë©”ì‹œì§€ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤
- `locale`ê³¼ `messages`ë¥¼ `NextIntlClientProvider`ì— ì „ë‹¬í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ `useTranslations` ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤

### 3.4 ë¡œì¼€ì¼ ê°ì§€ íë¦„

```
ì‚¬ìš©ì ìš”ì²­ â†’ ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰
  â†“
1. NEXT_LOCALE ì¿ í‚¤ í™•ì¸
  â”œâ”€ ìˆìŒ â†’ í•´ë‹¹ ë¡œì¼€ì¼ ì‚¬ìš©
  â””â”€ ì—†ìŒ â†’ 2ë‹¨ê³„ë¡œ
  â†“
2. Accept-Language í—¤ë” í™•ì¸
  â”œâ”€ ko-KR, ko â†’ 'ko' ì‚¬ìš©
  â”œâ”€ en-US, en â†’ 'en' ì‚¬ìš©
  â”œâ”€ ja, ja-JP â†’ 'ja' ì‚¬ìš©
  â”œâ”€ zh-CN, zh â†’ 'zh' ì‚¬ìš©
  â””â”€ ê¸°íƒ€ â†’ 3ë‹¨ê³„ë¡œ
  â†“
3. defaultLocale ì‚¬ìš© ('ko')
  â†“
ë¡œì¼€ì¼ í™•ì • â†’ ë ˆì´ì•„ì›ƒì—ì„œ ë©”ì‹œì§€ ë¡œë“œ â†’ í˜ì´ì§€ ë Œë”ë§
```

---

## 4. ì–¸ì–´ ìŠ¤ìœ„ì²˜ êµ¬í˜„ (ì¿ í‚¤ ê¸°ë°˜)

### 4.1 ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ ì¿ í‚¤ ì„¤ì •

**íŒŒì¼ ê²½ë¡œ**: `app/actions/set-locale.ts`

```typescript
'use server';

import {cookies} from 'next/headers';
import {redirect} from 'next/navigation';

export async function setLocale(locale: string, redirectTo: string) {
  // NEXT_LOCALE ì¿ í‚¤ ì„¤ì •
  cookies().set('NEXT_LOCALE', locale, {
    path: '/',                     // ëª¨ë“  ê²½ë¡œì—ì„œ ì‚¬ìš©
    maxAge: 60 * 60 * 24 * 365    // 1ë…„ ë³´ê´€
  });

  // í˜„ì¬ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¿ í‚¤ ì ìš©ì„ ìœ„í•´ ìƒˆë¡œê³ ì¹¨)
  redirect(redirectTo);
}
```

**ì™œ ì„œë²„ ì•¡ì…˜ì„ ì‚¬ìš©í•˜ë‚˜ìš”?**
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ `document.cookie`ë¡œ ì§ì ‘ ì„¤ì •í•˜ë©´ ì—£ì§€ í™˜ê²½ì—ì„œ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì„œë²„ ì•¡ì…˜ + `redirect()`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¿ í‚¤ê°€ í™•ì‹¤íˆ ì„¤ì •ë˜ê³  ë¯¸ë“¤ì›¨ì–´ê°€ ì¦‰ì‹œ ë°˜ì˜í•©ë‹ˆë‹¤
- Vercel, Cloudflare ë“± ì—£ì§€ í”Œë«í¼ì—ì„œ ì•ˆì „í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤

### 4.2 ì–¸ì–´ ìŠ¤ìœ„ì²˜ UI ì»´í¬ë„ŒíŠ¸

**íŒŒì¼ ê²½ë¡œ**: `components/language-switcher.tsx`

```typescript
'use client';

import {useTransition} from 'react';
import {useLocale} from 'next-intl';
import {setLocale} from '@/app/actions/set-locale';

export function LocaleSwitcher() {
  const currentLocale = useLocale();
  const [isPending, startTransition] = useTransition();

  const handleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {
    const nextLocale = event.target.value;

    // ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê³¼ í•´ì‹œê¹Œì§€ í¬í•¨í•´ í˜„ì¬ í˜ì´ì§€ ìœ ì§€
    const currentPath = window.location.pathname +
                        window.location.search +
                        window.location.hash;

    // Transitionìœ¼ë¡œ ê°ì‹¸ì„œ ë¶€ë“œëŸ¬ìš´ ì „í™˜
    startTransition(() => {
      setLocale(nextLocale, currentPath);
    });
  };

  return (
    <select
      value={currentLocale}
      onChange={handleChange}
      disabled={isPending}
      className="px-3 py-2 border border-slate-300 rounded-md bg-white text-sm"
    >
      <option value="ko">í•œêµ­ì–´</option>
      <option value="en">English</option>
      <option value="ja">æ—¥æœ¬èª</option>
      <option value="zh">ä¸­æ–‡</option>
    </select>
  );
}
```

**ë™ì‘ íë¦„:**
1. ì‚¬ìš©ìê°€ ì–¸ì–´ ì„ íƒ
2. `setLocale` ì„œë²„ ì•¡ì…˜ í˜¸ì¶œ
3. ì„œë²„ì—ì„œ NEXT_LOCALE ì¿ í‚¤ ì„¤ì •
4. `redirect()`ë¡œ í˜„ì¬ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
5. ë¯¸ë“¤ì›¨ì–´ê°€ ìƒˆ ì¿ í‚¤ ì½ê³  ë¡œì¼€ì¼ ì ìš©
6. í˜ì´ì§€ê°€ ì„ íƒí•œ ì–¸ì–´ë¡œ ë Œë”ë§ë¨

### 4.3 Topbarì— ì–¸ì–´ ìŠ¤ìœ„ì²˜ ì¶”ê°€

**íŒŒì¼ ê²½ë¡œ**: `components/topbar.tsx`

```typescript
import {LocaleSwitcher} from '@/components/language-switcher';

export function Topbar() {
  return (
    <header className="...">
      <nav className="...">
        {/* ê¸°ì¡´ ë„¤ë¹„ê²Œì´ì…˜ */}

        {/* ì–¸ì–´ ìŠ¤ìœ„ì²˜ ì¶”ê°€ */}
        <LocaleSwitcher />
      </nav>
    </header>
  );
}
```

### 4.4 í˜ì´ì§€ ì˜ˆì‹œ

**íŒŒì¼ ê²½ë¡œ**: `app/about-us/page.tsx`

```typescript
import {useTranslations} from 'next-intl';

export default function AboutUs() {
  const t = useTranslations('about');

  return (
    <main className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-4">{t('title')}</h1>
      <p className="text-lg text-slate-600">{t('body')}</p>
    </main>
  );
}
```

**messages/ko.json:**
```json
{
  "about": {
    "title": "íšŒì‚¬ ì†Œê°œ",
    "body": "ë°”ì´ë²„ìŠ¤ëŠ” AI ê¸°ë°˜ ë°”ì´ë¸Œ ì½”ë”©ìœ¼ë¡œ ì‹¤ì „ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“œëŠ” ì»¤ë®¤ë‹ˆí‹°ì…ë‹ˆë‹¤."
  }
}
```

**messages/en.json:**
```json
{
  "about": {
    "title": "About Us",
    "body": "Vibers is a community that builds real-world web applications through AI-powered vibe coding."
  }
}
```

**ê²°ê³¼:**
- URL: `/about-us` (ì–¸ì–´ì™€ ë¬´ê´€í•˜ê²Œ ë™ì¼)
- í•œêµ­ì–´ ì¿ í‚¤: "íšŒì‚¬ ì†Œê°œ" + í•œê¸€ ë³¸ë¬¸ í‘œì‹œ
- ì˜ì–´ ì¿ í‚¤: "About Us" + ì˜ë¬¸ ë³¸ë¬¸ í‘œì‹œ

---

## 5. ìºì‹œ í™˜ê²½ ì£¼ì˜ì‚¬í•­

### 5.1 Vercel/Cloudflare ì—£ì§€ í™˜ê²½

**âš ï¸ ì£¼ì˜ì‚¬í•­:**
- `localePrefix: 'never'`ë¥¼ ì‚¬ìš©í•˜ë©´ **NEXT_LOCALE ì¿ í‚¤ê°€ ë¡œì¼€ì¼ì˜ ë‹¨ì¼ ì†ŒìŠ¤**ê°€ ë©ë‹ˆë‹¤
- ì—£ì§€ í™˜ê²½(Vercel Edge, Cloudflare Workers)ì—ì„œ `Set-Cookie` í—¤ë”ê°€ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì¿ í‚¤ê°€ ì œëŒ€ë¡œ ì„¤ì •ë˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©ìê°€ ì„ íƒí•œ ì–¸ì–´ê°€ ë°˜ì˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤

### 5.2 ê¶Œì¥ ì‚¬í•­

1. **ì„œë²„ ì•¡ì…˜ ì‚¬ìš©**
   ```typescript
   'use server';
   import {cookies} from 'next/headers';

   export async function setLocale(locale: string) {
     cookies().set('NEXT_LOCALE', locale, {
       path: '/',
       maxAge: 60 * 60 * 24 * 365
     });
   }
   ```

2. **redirect()ë¡œ ìƒˆë¡œê³ ì¹¨**
   ```typescript
   import {redirect} from 'next/navigation';

   await setLocale(newLocale);
   redirect(currentPath);  // ì¿ í‚¤ ì ìš©ì„ ìœ„í•´ ìƒˆë¡œê³ ì¹¨
   ```

3. **í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ ì¿ í‚¤ ì¡°ì‘ ê¸ˆì§€**
   ```typescript
   // âŒ ì•ˆ ì¢‹ì€ ì˜ˆ
   document.cookie = `NEXT_LOCALE=${locale}; path=/; max-age=31536000`;

   // âœ… ì¢‹ì€ ì˜ˆ
   await setLocale(locale, currentPath);  // ì„œë²„ ì•¡ì…˜ ì‚¬ìš©
   ```

### 5.3 ë””ë²„ê¹… ë°©ë²•

**ì¿ í‚¤ê°€ ì œëŒ€ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸:**
1. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)
2. Application (ë˜ëŠ” Storage) íƒ­ â†’ Cookies
3. `NEXT_LOCALE` ì¿ í‚¤ í™•ì¸
4. ê°’ì´ ì„ íƒí•œ ì–¸ì–´(`ko`, `en`, `ja`, `zh`)ì¸ì§€ í™•ì¸

**ë¯¸ë“¤ì›¨ì–´ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸:**
```typescript
// middleware.tsì— ë¡œê·¸ ì¶”ê°€ (ê°œë°œ í™˜ê²½ë§Œ)
export default createMiddleware({
  ...routing,
  localeDetection(request) {
    console.log('Detected locale:', request.cookies.get('NEXT_LOCALE'));
    return undefined; // ê¸°ë³¸ ê°ì§€ ë¡œì§ ì‚¬ìš©
  }
});
```

---

## 6. ë™ì‘ íë¦„

### 6.1 ì²« ë°©ë¬¸ ì‹œ (ì¿ í‚¤ ì—†ìŒ)

```
ì‚¬ìš©ì ì ‘ì† (https://www.vibers.kr/forum/list)
  â†“
[ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰]
  â†“
NEXT_LOCALE ì¿ í‚¤ í™•ì¸ â†’ ì—†ìŒ
  â†“
Accept-Language í—¤ë” í™•ì¸ â†’ ko-KR, ko
  â†“
ë¡œì¼€ì¼ ì„¤ì •: 'ko'
  â†“
[ë ˆì´ì•„ì›ƒ ë Œë”ë§]
  â†“
messages/ko.json ë¡œë“œ
  â†“
[í˜ì´ì§€ ë Œë”ë§]
  â†“
í•œêµ­ì–´ë¡œ í‘œì‹œ: "í¬ëŸ¼", "ê¸€ì“°ê¸°" ë“±
```

### 6.2 ì–¸ì–´ ì „í™˜ ì‹œ

```
ì‚¬ìš©ìê°€ ì–¸ì–´ ìŠ¤ìœ„ì²˜ì—ì„œ 'English' ì„ íƒ
  â†“
[í´ë¼ì´ì–¸íŠ¸]
handleChange ì´ë²¤íŠ¸ ë°œìƒ
  â†“
setLocale('en', '/forum/list') ì„œë²„ ì•¡ì…˜ í˜¸ì¶œ
  â†“
[ì„œë²„]
cookies().set('NEXT_LOCALE', 'en', {path: '/', maxAge: ...})
  â†“
redirect('/forum/list')
  â†“
[ë¯¸ë“¤ì›¨ì–´ ì¬ì‹¤í–‰]
  â†“
NEXT_LOCALE ì¿ í‚¤ í™•ì¸ â†’ 'en'
  â†“
ë¡œì¼€ì¼ ì„¤ì •: 'en'
  â†“
[ë ˆì´ì•„ì›ƒ ë Œë”ë§]
  â†“
messages/en.json ë¡œë“œ
  â†“
[í˜ì´ì§€ ë Œë”ë§]
  â†“
ì˜ì–´ë¡œ í‘œì‹œ: "Forum", "Write" ë“±
```

### 6.3 ì´í›„ ë°©ë¬¸ ì‹œ (ì¿ í‚¤ ìˆìŒ)

```
ì‚¬ìš©ì ì¬ì ‘ì† (https://www.vibers.kr/forum/list)
  â†“
[ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰]
  â†“
NEXT_LOCALE ì¿ í‚¤ í™•ì¸ â†’ 'en' (ì´ì „ì— ì„¤ì •í•œ ê°’)
  â†“
ë¡œì¼€ì¼ ì„¤ì •: 'en'
  â†“
[ë ˆì´ì•„ì›ƒ ë Œë”ë§]
  â†“
messages/en.json ë¡œë“œ
  â†“
[í˜ì´ì§€ ë Œë”ë§]
  â†“
ì˜ì–´ë¡œ í‘œì‹œ (ì‚¬ìš©ìê°€ ì´ì „ì— ì„ íƒí•œ ì–¸ì–´ ìœ ì§€)
```

### 6.4 ìš”ì•½

| ì‹œë‚˜ë¦¬ì˜¤ | NEXT_LOCALE ì¿ í‚¤ | Accept-Language | ìµœì¢… ë¡œì¼€ì¼ |
|---------|----------------|-----------------|-----------|
| ì²« ë°©ë¬¸ (í•œêµ­) | ì—†ìŒ | ko-KR | **ko** |
| ì²« ë°©ë¬¸ (ë¯¸êµ­) | ì—†ìŒ | en-US | **en** |
| ì²« ë°©ë¬¸ (ì¼ë³¸) | ì—†ìŒ | ja | **ja** |
| ì–¸ì–´ ì „í™˜ í›„ | en | ko-KR | **en** (ì¿ í‚¤ ìš°ì„ ) |
| ì¬ë°©ë¬¸ | ko | en-US | **ko** (ì¿ í‚¤ ìœ ì§€) |

---

## 7. ë²ˆì—­ ì‚¬ìš©ë²•

### useTranslations Hook

**ê¸°ë³¸ ì‚¬ìš©ë²•:**
```typescript
import {useTranslations} from 'next-intl';

export default function Component() {
  const t = useTranslations('common');

  return (
    <button>{t('submit')}</button>
  );
}
```

### ì¤‘ì²©ëœ ë©”ì‹œì§€ êµ¬ì¡°

**JSON íŒŒì¼:**
```json
{
  "auth": {
    "SignUp": {
      "form": {
        "placeholder": "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
      }
    }
  }
}
```

**ì»´í¬ë„ŒíŠ¸:**
```typescript
const t = useTranslations('auth.SignUp');
return <input placeholder={t('form.placeholder')} />;
```

### ë³€ìˆ˜ ì‚½ì… (Interpolation)

**JSON íŒŒì¼:**
```json
{
  "welcome": "ì•ˆë…•í•˜ì„¸ìš”, {name}ë‹˜!",
  "itemCount": "{count}ê°œì˜ í•­ëª©"
}
```

**ì»´í¬ë„ŒíŠ¸:**
```typescript
const t = useTranslations('common');

t('welcome', {name: 'í™ê¸¸ë™'});  // "ì•ˆë…•í•˜ì„¸ìš”, í™ê¸¸ë™ë‹˜!"
t('itemCount', {count: 5});       // "5ê°œì˜ í•­ëª©"
```

### ë³µìˆ˜í˜• ì²˜ë¦¬

**ê¸°ìˆ˜ ë³µìˆ˜í˜• (plural):**
```json
{
  "followers": "íŒ”ë¡œì›Œ {count, plural, =0 {ì—†ìŒ} =1 {# ëª…} other {# ëª…}}"
}
```

```typescript
t('followers', {count: 0});  // "íŒ”ë¡œì›Œ ì—†ìŒ"
t('followers', {count: 1});  // "íŒ”ë¡œì›Œ 1 ëª…"
t('followers', {count: 5});  // "íŒ”ë¡œì›Œ 5 ëª…"
```

**ì„œìˆ˜ ë³µìˆ˜í˜• (selectordinal):**
```json
{
  "birthday": "{year, selectordinal, one {#ë²ˆì§¸} other {#ë²ˆì§¸}} ìƒì¼"
}
```

### ì„œë²„ ì»´í¬ë„ŒíŠ¸ ë²ˆì—­

App Routerì—ì„œëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `getTranslations` ë˜ëŠ” `createTranslator`ë¥¼ ì‚¬ìš©í•´ ë¹Œë“œ íƒ€ì„ í˜¹ì€ ìš”ì²­ ì‹œì ì— ë²ˆì—­ ë¬¸ìì—´ì„ ìƒì„±í•©ë‹ˆë‹¤.

```tsx
// app/[locale]/forum/list/page.tsx (Server Component)
import {getTranslations} from 'next-intl/server';

export default async function ForumListPage() {
  const t = await getTranslations('forum');

  return (
    <section>
      <h1 className="text-3xl font-bold">{t('title')}</h1>
    </section>
  );
}
```

```ts
// lib/forum-metadata.ts
import {createTranslator} from 'next-intl';

export async function createForumSeo(locale: string) {
  const translator = await createTranslator({locale, namespace: 'forum'});
  return {
    title: translator('seo.title'),
    description: translator('seo.description'),
  };
}
```

> `createTranslator`ëŠ” `generateMetadata`, `generateStaticParams`, API Route ë“± React ì™¸ë¶€ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë²ˆì—­ì´ í•„ìš”í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

### Rich í…ìŠ¤íŠ¸ & React ìš”ì†Œ ë²ˆì—­

```json
// messages/ko.json
{
  "auth": {
    "terms": "ì•½ê´€ì— <strong>ë™ì˜</strong>í–ˆìŠµë‹ˆë‹¤."
  }
}
```

```tsx
const t = useTranslations('auth');

return t.rich('terms', {
  strong: (chunk) => <strong className="text-primary">{chunk}</strong>,
});
```

ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ë²ˆì—­ ì‹œ ë¬¸ìì—´ ì¼ë¶€ë¶„ì„ React ìš”ì†Œë¡œ ì¹˜í™˜í•  ìˆ˜ ìˆìœ¼ë©°, ê³µì‹ ë¬¸ì„œì—ì„œëŠ” `t.rich`ë¥¼ ì‚¬ìš©í•´ XSS ìœ„í—˜ ì—†ì´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### Provider ë©”ì‹œì§€ ì§ì ‘ ì ‘ê·¼

```tsx
import {useMessages} from 'next-intl';

const messages = useMessages();
const authPlaceholders = messages?.auth?.placeholders;
```

`useMessages`ëŠ” Providerê°€ ì „ë‹¬í•œ ì „ì²´ ë©”ì‹œì§€ ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê³µí†µ ë ˆì´ì•„ì›ƒì—ì„œ placeholder, SEO í…ìŠ¤íŠ¸ ë“±ì„ ì¬ì‚¬ìš©í•´ì•¼ í•  ë•Œ í™œìš©í•©ë‹ˆë‹¤.

---

## 8. ìˆ«ì í¬ë§·íŒ…

### useFormatter Hook

```typescript
import {useFormatter} from 'next-intl';

export default function Component() {
  const format = useFormatter();

  // í†µí™” í‘œì‹œ
  format.number(499.9, {style: 'currency', currency: 'USD'});
  // ì˜ì–´: "$499.90"
  // í•œêµ­ì–´: "US$499.90"

  // ë°±ë¶„ìœ¨
  format.number(0.85, {style: 'percent'});
  // "85%"

  // ì†Œìˆ˜ì  ìë¦¿ìˆ˜
  format.number(1234.5678, {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  });
  // ì˜ì–´: "1,234.57"
  // í•œêµ­ì–´: "1,234.57"
}
```

### ê¸€ë¡œë²Œ í¬ë§· ì‚¬ìš©

**i18n/request.tsì—ì„œ í¬ë§· ì •ì˜:**
```typescript
export default getRequestConfig(async ({locale}) => {
  return {
    locale,
    messages: (await import(`../../messages/${locale}.json`)).default,
    formats: {
      number: {
        price: {
          style: 'currency',
          currency: 'KRW'
        }
      }
    }
  };
});
```

**ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©:**
```typescript
format.number(49900, 'price');  // "â‚©49,900"
```

---

## 9. ë‚ ì§œ/ì‹œê°„ í¬ë§·íŒ…

### dateTime() í•¨ìˆ˜

```typescript
import {useFormatter} from 'next-intl';

export default function Component() {
  const format = useFormatter();
  const date = new Date('2025-10-31T15:30:00');

  // ê¸°ë³¸ í¬ë§·
  format.dateTime(date, {
    year: 'numeric',
    month: 'short',
    day: 'numeric'
  });
  // ì˜ì–´: "Oct 31, 2025"
  // í•œêµ­ì–´: "2025ë…„ 10ì›” 31ì¼"

  // ì‹œê°„ í¬í•¨
  format.dateTime(date, {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
    hour: 'numeric',
    minute: 'numeric'
  });
  // í•œêµ­ì–´: "2025ë…„ 10ì›” 31ì¼ ì˜¤í›„ 3:30"
}
```

### relativeTime() í•¨ìˆ˜

```typescript
import {useFormatter} from 'next-intl';

export default function Component() {
  const format = useFormatter();
  const now = new Date();
  const twoHoursAgo = new Date(now.getTime() - 2 * 60 * 60 * 1000);

  format.relativeTime(twoHoursAgo, now);
  // ì˜ì–´: "2 hours ago"
  // í•œêµ­ì–´: "2ì‹œê°„ ì „"

  // íŠ¹ì • ë‹¨ìœ„ ì§€ì •
  format.relativeTime(twoHoursAgo, {unit: 'day'});
  // "0 days ago"
}
```

### useNow Hook (ìë™ ì—…ë°ì´íŠ¸)

```typescript
import {useFormatter, useNow} from 'next-intl';

export default function Component() {
  const format = useFormatter();
  const now = useNow({
    updateInterval: 1000 * 60  // 1ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸
  });

  const postDate = new Date('2025-10-31T14:00:00');

  return <span>{format.relativeTime(postDate, now)}</span>;
  // ìë™ìœ¼ë¡œ "1ì‹œê°„ ì „" â†’ "2ì‹œê°„ ì „"ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨
}
```

---

## 10. ë¦¬ìŠ¤íŠ¸ í¬ë§·íŒ…

### list() í•¨ìˆ˜

```typescript
import {useFormatter} from 'next-intl';

export default function Component() {
  const format = useFormatter();
  const items = ['HTML', 'CSS', 'JavaScript'];

  // ì—°ê²°í˜• (and)
  format.list(items, {type: 'conjunction'});
  // ì˜ì–´: "HTML, CSS, and JavaScript"
  // í•œêµ­ì–´: "HTML, CSS ë° JavaScript"

  // ì„ íƒí˜• (or)
  format.list(items, {type: 'disjunction'});
  // ì˜ì–´: "HTML, CSS, or JavaScript"
  // í•œêµ­ì–´: "HTML, CSS ë˜ëŠ” JavaScript"
}
```

### React ìš”ì†Œì™€ í•¨ê»˜ ì‚¬ìš©

```typescript
const users = [
  <Link href="/users/1">í™ê¸¸ë™</Link>,
  <Link href="/users/2">ê¹€ì² ìˆ˜</Link>,
  <Link href="/users/3">ì´ì˜í¬</Link>
];

format.list(users);
// "í™ê¸¸ë™, ê¹€ì² ìˆ˜ ë° ì´ì˜í¬" (ê°ê° ë§í¬ë¡œ ë Œë”ë§)
```

---

## 7. ë¼ìš°íŒ… ì„¤ì •

### i18n/routing.ts

```typescript
import {defineRouting} from 'next-intl/routing';

export const routing = defineRouting({
  locales: ['en', 'ko', 'ja', 'zh'],
  defaultLocale: 'ko',
  localePrefix: 'as-needed'  // ê¸°ë³¸ localeì€ ì ‘ë‘ì‚¬ ì œê±°
});
```

### navigation.ts

```typescript
import {createNavigation} from 'next-intl/navigation';
import {routing} from './i18n/routing';

export const {Link, redirect, usePathname, useRouter} =
  createNavigation(routing);
```

### Link ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

```typescript
import {Link} from '@/navigation';

export default function Component() {
  return (
    <>
      {/* í˜„ì¬ locale ìœ ì§€ */}
      <Link href="/forum/list">í¬ëŸ¼</Link>

      {/* locale ë³€ê²½ */}
      <Link href="/forum/list" locale="en">Forum</Link>
    </>
  );
}
```

### useRouter Hook

```typescript
import {useRouter} from '@/navigation';

export default function Component() {
  const router = useRouter();

  const handleClick = () => {
    router.push('/forum/list');  // locale ìë™ í¬í•¨
  };

  return <button onClick={handleClick}>ì´ë™</button>;
}
```

### Locale Prefix ì „ëµ

**1. `localePrefix: 'always'` (ê¸°ë³¸ê°’)**
- ëª¨ë“  ê²½ë¡œì— locale ì ‘ë‘ì‚¬ í¬í•¨
- ì˜ˆ: `/ko/forum/list`, `/en/forum/list`

**2. `localePrefix: 'as-needed'` (ê¶Œì¥)**
- ê¸°ë³¸ localeì€ ì ‘ë‘ì‚¬ ì—†ìŒ
- ë‹¤ë¥¸ localeì€ ì ‘ë‘ì‚¬ í¬í•¨
- ì˜ˆ: `/forum/list` (í•œêµ­ì–´), `/en/forum/list` (ì˜ì–´)

**3. `localePrefix: 'never'`**
- URLì— locale í‘œì‹œ ì•ˆ í•¨
- domain ê¸°ë°˜ ë˜ëŠ” cookie ê¸°ë°˜ locale ê²°ì • ì‹œ ì‚¬ìš©

### Locale Detection

ë¯¸ë“¤ì›¨ì–´ê°€ ìë™ìœ¼ë¡œ localeì„ ê°ì§€í•©ë‹ˆë‹¤:
1. URLì˜ locale ì ‘ë‘ì‚¬
2. `accept-language` í—¤ë”
3. ì¿ í‚¤ (`NEXT_LOCALE`)

```typescript
// middleware.ts
import createMiddleware from 'next-intl/middleware';
import {routing} from './i18n/routing';

export default createMiddleware(routing);

export const config = {
  matcher: ['/((?!api|_next|.*\\..*).*)']
};
```

### Pathnames ë§¤í•‘

`routing` ê°ì²´ì˜ `pathnames` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ê° localeë³„ë¡œ ì•ˆì •ì ì¸ ê²½ë¡œë¥¼ ìœ ì§€í•˜ê±°ë‚˜ ì–¸ì–´ë§ˆë‹¤ ë‹¤ë¥¸ URLì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œëŠ” SEO ì¹œí™”ì ì¸ ë‹¤êµ­ì–´ URLì„ ìœ„í•´ ë¯¸ë¦¬ ì„ ì–¸í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

```ts
// src/i18n/routing.ts
export const routing = defineRouting({
  locales: ['en', 'ko', 'ja', 'zh'],
  defaultLocale: 'ko',
  localePrefix: 'as-needed',
  pathnames: {
    '/forum/list': {
      ko: '/forum/list',
      en: '/forum/list',
      ja: '/forum/list',
      zh: '/forum/list',
    },
    '/auth/login': {
      ko: '/auth/login',
      en: '/auth/login',
      ja: '/auth/login',
      zh: '/auth/login',
    },
  },
});
```

í–¥í›„ `/menu` â†’ `/ãƒ¡ãƒ‹ãƒ¥ãƒ¼` ê°™ì€ ì–¸ì–´ë³„ ë§ì¶¤ ê²½ë¡œê°€ í•„ìš”í•  ë•ŒëŠ” í•´ë‹¹ ê²½ë¡œë§Œ ë³„ë„ë¡œ ë³€ê²½í•˜ë©´ ë©ë‹ˆë‹¤.

### localeDetection & ë¦¬ë‹¤ì´ë ‰íŠ¸ ì œì–´

```ts
export const routing = defineRouting({
  // ...
  localeDetection: true,
  redirects: {
    '/': 'home', // pathnames.homeë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  },
});
```

- `localeDetection`ì„ `false`ë¡œ ì„¤ì •í•˜ë©´ ìë™ ê°ì§€ë¥¼ ë¹„í™œì„±í™”í•˜ê³ , `/ko`, `/en` ë“± ëª…ì‹œì  prefixë§Œ í—ˆìš©í•©ë‹ˆë‹¤.
- `redirects` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ë£¨íŠ¸ ê²½ë¡œë¥¼ íŠ¹ì • locale í˜ì´ì§€ë¡œ ê°•ì œ ì´ë™ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë©€í‹° ë„ë©”ì¸ì´ í•„ìš”í•˜ë‹¤ë©´ `domains` ë°°ì—´ì— `{domain, defaultLocale, locales}`ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.

---

## 11. ë³¸ í”„ë¡œì íŠ¸ ì ìš© ê°€ì´ë“œ

### 8.1 í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°
ë³¸ í”„ë¡œì íŠ¸(Vibe)ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:
```
app/
  â”œâ”€â”€ forum/list/page.tsx
  â”œâ”€â”€ chat/room/page.tsx
  â”œâ”€â”€ auth/login/page.tsx
  â””â”€â”€ layout.tsx
```

### 8.2 ë‹¤êµ­ì–´ ì ìš© ë‹¨ê³„ë³„ ê°€ì´ë“œ

#### 1ë‹¨ê³„: ë””ë ‰í† ë¦¬ êµ¬ì¡° ë³€ê²½

**ë³€ê²½ ì „:**
```
app/
  â””â”€â”€ forum/list/page.tsx
```

**ë³€ê²½ í›„:**
```
app/
  â”œâ”€â”€ [locale]/
  â”‚   â””â”€â”€ forum/list/page.tsx
  â””â”€â”€ navigation.ts
```

#### 2ë‹¨ê³„: ë²ˆì—­ íŒŒì¼ ìƒì„±

**messages/ko.json:**
```json
{
  "common": {
    "submit": "ì „ì†¡",
    "cancel": "ì·¨ì†Œ",
    "loading": "ë¡œë”© ì¤‘..."
  },
  "forum": {
    "title": "í¬ëŸ¼",
    "createPost": "ê¸€ì“°ê¸°",
    "category": "ì¹´í…Œê³ ë¦¬",
    "categories": {
      "community": "ì»¤ë®¤ë‹ˆí‹°",
      "qna": "ì§ˆë¬¸ê³¼ë‹µë³€",
      "news": "ë‰´ìŠ¤",
      "market": "íšŒì›ì¥í„°"
    },
    "noPost": "ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤",
    "firstPost": "ì²« ë²ˆì§¸ ê²Œì‹œê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!"
  },
  "auth": {
    "login": "ë¡œê·¸ì¸",
    "signup": "íšŒì›ê°€ì…",
    "email": "ì´ë©”ì¼",
    "password": "ë¹„ë°€ë²ˆí˜¸"
  }
}
```

**messages/en.json:**
```json
{
  "common": {
    "submit": "Submit",
    "cancel": "Cancel",
    "loading": "Loading..."
  },
  "forum": {
    "title": "Forum",
    "createPost": "Write",
    "category": "Category",
    "categories": {
      "community": "Community",
      "qna": "Q&A",
      "news": "News",
      "market": "Marketplace"
    },
    "noPost": "No posts yet",
    "firstPost": "Write the first post!"
  },
  "auth": {
    "login": "Log in",
    "signup": "Sign up",
    "email": "Email",
    "password": "Password"
  }
}
```

#### 3ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ì—ì„œ ë²ˆì—­ ì‚¬ìš©

**ë³€ê²½ ì „ (app/forum/list/page.tsx):**
```typescript
<h1 className="text-3xl font-bold">í¬ëŸ¼</h1>
<Button onClick={handleCreatePost}>
  <MessageSquarePlus className="h-4 w-4" />
  ê¸€ì“°ê¸°
</Button>
```

**ë³€ê²½ í›„ (app/[locale]/forum/list/page.tsx):**
```typescript
import {useTranslations} from 'next-intl';

export default function ForumListPage() {
  const t = useTranslations('forum');

  return (
    <>
      <h1 className="text-3xl font-bold">{t('title')}</h1>
      <Button onClick={handleCreatePost}>
        <MessageSquarePlus className="h-4 w-4" />
        {t('createPost')}
      </Button>
    </>
  );
}
```

#### 4ë‹¨ê³„: ì¹´í…Œê³ ë¦¬ ëª©ë¡ ë‹¤êµ­ì–´í™”

**app.config.ts ìˆ˜ì •:**
```typescript
// ë³€ê²½ ì „
export const FORUM_CATEGORIES = [
  { value: "community", label: "ì»¤ë®¤ë‹ˆí‹°" },
  { value: "qna", label: "ì§ˆë¬¸ê³¼ë‹µë³€" },
  // ...
];

// ë³€ê²½ í›„
export const FORUM_CATEGORIES = [
  { value: "community" },
  { value: "qna" },
  { value: "news" },
  { value: "market" },
] as const;
```

**ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©:**
```typescript
const t = useTranslations('forum.categories');

{FORUM_CATEGORIES.map((category) => (
  <SelectItem key={category.value} value={category.value}>
    {t(category.value)}
  </SelectItem>
))}
```

#### 5ë‹¨ê³„: ë‚ ì§œ/ì‹œê°„ ë‹¤êµ­ì–´í™”

**ê²Œì‹œê¸€ ì‘ì„± ì‹œê°„ í‘œì‹œ:**
```typescript
const format = useFormatter();
const now = useNow({updateInterval: 60000});  // 1ë¶„ë§ˆë‹¤ ì—…ë°ì´íŠ¸

{posts.map((post) => (
  <div key={post.postId}>
    <h3>{post.title}</h3>
    <span>{format.relativeTime(new Date(post.createdAt), now)}</span>
  </div>
))}
```

#### 6ë‹¨ê³„: ì–¸ì–´ ì „í™˜ UI ì¶”ê°€

**components/language-switcher.tsx:**
```typescript
'use client';

import {useLocale} from 'next-intl';
import {useRouter, usePathname} from '@/navigation';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";

const languages = [
  {code: 'ko', name: 'í•œêµ­ì–´'},
  {code: 'en', name: 'English'},
  {code: 'ja', name: 'æ—¥æœ¬èª'},
  {code: 'zh', name: 'ä¸­æ–‡'}
];

export function LanguageSwitcher() {
  const locale = useLocale();
  const router = useRouter();
  const pathname = usePathname();

  const handleChange = (newLocale: string) => {
    router.replace(pathname, {locale: newLocale});
  };

  return (
    <Select value={locale} onValueChange={handleChange}>
      <SelectTrigger>
        <SelectValue />
      </SelectTrigger>
      <SelectContent>
        {languages.map((lang) => (
          <SelectItem key={lang.code} value={lang.code}>
            {lang.name}
          </SelectItem>
        ))}
      </SelectContent>
    </Select>
  );
}
```

#### 7ë‹¨ê³„: ë¼ìš°íŒ… ë° ë¯¸ë“¤ì›¨ì–´ ì—°ê²°

1. `src/i18n/routing.ts`ì— `defineRouting`ì„ ì •ì˜í•˜ê³  `locales`, `defaultLocale`, `localePrefix`, `pathnames`ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.
2. `app/navigation.ts`ì—ì„œ `createNavigation(routing)`ìœ¼ë¡œ `Link`, `useRouter`, `usePathname`ë¥¼ ì¬ì •ì˜í•´ locale-aware ë„¤ë¹„ê²Œì´ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
3. ë£¨íŠ¸ì— `middleware.ts`ë¥¼ ìƒì„±í•˜ì—¬ `createMiddleware(routing)`ì„ ë°˜í™˜í•©ë‹ˆë‹¤. `matcher`ëŠ” `/((?!api|_next|.*\\..*).*)`ë¡œ ì„¤ì •í•´ ì •ì  ìì‚°ê³¼ APIë¥¼ ì œì™¸í•©ë‹ˆë‹¤.

> ê³µì‹ ë¬¸ì„œì˜ Routing Â· Setup ì˜ˆì œë¥¼ ê·¸ëŒ€ë¡œ ì ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ë¯¸ë“¤ì›¨ì–´ëŠ” Vercel Edgeì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ê°€ë²¼ìš´ ë¡œì§ë§Œ ìœ ì§€í•©ë‹ˆë‹¤.

#### 8ë‹¨ê³„: í¬ë§· ë° ê¸°ë³¸ê°’ ì¤‘ì•™ ê´€ë¦¬

- `i18n/request.ts`ì˜ `getRequestConfig`ì—ì„œ `formats.number`, `formats.dateTime`, `formats.list` ë“±ì„ ì •ì˜í•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¦¬ì…‹ì„ ë§Œë“­ë‹ˆë‹¤.
- `defaultTranslationValues`ë¥¼ ì‚¬ìš©í•˜ë©´ `{name}` ê°™ì€ placeholderì˜ ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆì–´ ëˆ„ë½ ì‹œì—ë„ ì•±ì´ ê¹¨ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
- `timeZone`, `now` ì˜µì…˜ì„ í†µí•´ ë‚ ì§œ/ì‹œê°„ ê´€ë ¨ ê³„ì‚°ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.

### 8.3 ìš°ì„ ìˆœìœ„ë³„ ì ìš© ìˆœì„œ

**Phase 1: ê¸°ë³¸ UI í…ìŠ¤íŠ¸ (í•„ìˆ˜)**
- ê³µí†µ ë²„íŠ¼ (ì „ì†¡, ì·¨ì†Œ, ì €ì¥ ë“±)
- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
- ì—ëŸ¬ ë©”ì‹œì§€

**Phase 2: ì£¼ìš” ê¸°ëŠ¥ (ê¶Œì¥)**
- ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬
- ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼
- í”„ë¡œí•„ í˜ì´ì§€

**Phase 3: í¬ë§·íŒ… (ì„ íƒ)**
- ë‚ ì§œ/ì‹œê°„ ìƒëŒ€ í‘œì‹œ
- ìˆ«ì í†µí™” í‘œì‹œ
- ë¦¬ìŠ¤íŠ¸ í¬ë§·íŒ…

### 8.4 ì£¼ì˜ì‚¬í•­

1. **í•˜ë“œì½”ë”©ëœ í…ìŠ¤íŠ¸ ê¸ˆì§€**
   - âŒ `<button>ì „ì†¡</button>`
   - âœ… `<button>{t('common.submit')}</button>`

2. **ë³€ìˆ˜ëŠ” ë²ˆì—­ íŒŒì¼ì—ì„œ ì²˜ë¦¬**
   - âŒ `{count}ê°œì˜ ê²Œì‹œê¸€`
   - âœ… `{t('forum.postCount', {count})}`

3. **ë³µìˆ˜í˜• ì²˜ë¦¬ í™œìš©**
   - âŒ `{count === 1 ? 'ê²Œì‹œê¸€' : 'ê²Œì‹œê¸€ë“¤'}`
   - âœ… `{t('forum.posts', {count})}`

4. **ë‚ ì§œëŠ” í•­ìƒ í¬ë§·íŒ…**
   - âŒ `new Date(post.createdAt).toLocaleDateString()`
   - âœ… `format.dateTime(new Date(post.createdAt), {...})`

### 8.5 ì„±ëŠ¥ ìµœì í™”

1. **Server Componentsì—ì„œ ë²ˆì—­ ë¡œë“œ**
   ```typescript
   import {getTranslations} from 'next-intl/server';

   export default async function Page() {
     const t = await getTranslations('forum');
     // ...
   }
   ```

2. **í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” í•„ìš”í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§Œ**
   ```typescript
   const t = useTranslations('forum');  // ì „ì²´ ë©”ì‹œì§€ê°€ ì•„ë‹Œ forumë§Œ
   ```

3. **ê³µí†µ ë²ˆì—­ì€ ë ˆì´ì•„ì›ƒì—ì„œ ì œê³µ**
   ```typescript
   // app/[locale]/layout.tsx
   const messages = await getMessages();
   return (
     <NextIntlClientProvider messages={pick(messages, ['common'])}>
       {children}
     </NextIntlClientProvider>
   );
   ```

### 8.6 í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì ìš© ì˜ˆì‹œ

- **Topbar (`components/topbar.tsx`)**
  - `useTranslations('navigation')`ìœ¼ë¡œ í¬ëŸ¼/ì±„íŒ…/ì‚¬ìš©ì ë©”ë‰´ ë¼ë²¨ì„ ì¹˜í™˜í•©ë‹ˆë‹¤.
  - ë¡œê·¸ì¸ ìƒíƒœë³„ ë²„íŠ¼ í…ìŠ¤íŠ¸(`ë¡œê·¸ì¸`, `íšŒì›ê°€ì…`, `í”„ë¡œí•„ ìˆ˜ì •`)ë¥¼ `auth`, `profile` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.
  - ë“œë¡­ë‹¤ìš´ ë˜ëŠ” ëª¨ë°”ì¼ ë©”ë‰´ì— `LanguageSwitcher`ë¥¼ ë°°ì¹˜í•´ locale ì „í™˜ì„ ì œê³µí•©ë‹ˆë‹¤.

  ```tsx
  const tNav = useTranslations('navigation');

  <Button variant="ghost" size="sm" asChild>
    <Link href="/forum/list">
      <LayoutGrid className="h-4 w-4 mr-2" />
      {tNav('forum')}
    </Link>
  </Button>
  ```

- **ë©”ë‰´ í˜ì´ì§€ (`app/menu/page.tsx`)**
  - `useTranslations('menu')`ë¡œ ë²„íŠ¼ ë ˆì´ë¸”ê³¼ ì„¤ëª… ë¬¸êµ¬ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
  - íšŒì› ì •ë³´ ì¹´ë“œì—ì„œ `format.list`ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ì ì—­í•  ë“±ì„ ìì—°ì–´ë¡œ ë³‘ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì•Œë¦¼ ë¬¸êµ¬ëŠ” `t('menu.logout.confirm')` ê°™ì´ ë³„ë„ í‚¤ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

- **í¬ëŸ¼ & ì±„íŒ… í˜ì´ì§€ (`app/[locale]/forum/**`, `app/[locale]/chat/**`)**
  - ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `getTranslations('forum')` ë˜ëŠ” `getTranslations('chat')`ë¡œ SEO í…ìŠ¤íŠ¸ì™€ íƒ€ì´í‹€ì„ ì„¤ì •í•©ë‹ˆë‹¤.
  - ê²Œì‹œê¸€/ë©”ì‹œì§€ íƒ€ì„ìŠ¤íƒ¬í”„ì— `format.relativeTime`ì„ ì ìš©í•˜ê³ , ìˆ«ì í†µê³„(ì¡°íšŒìˆ˜Â·ì¢‹ì•„ìš”)ëŠ” `format.number`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

- **ê³µìœ  êµ¬ì„± (`app/app.config.ts`, `app/config/forum.ts` ë“±)**
  - `FORUM_CATEGORIES`ì²˜ëŸ¼ labelì„ ê°€ì§„ ìƒìˆ˜ëŠ” `value`ë§Œ ìœ ì§€í•˜ê³ , í‘œì‹œ ë¬¸ìì—´ì€ `t('forum.categories.community')`ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
  - Validation/ì—ëŸ¬ ë©”ì‹œì§€ëŠ” `messages/common/errors.json`ê³¼ ê°™ì´ ë³„ë„ íŒŒì¼ì— ë¬¶ì–´ ì¬ì‚¬ìš©í•©ë‹ˆë‹¤.

### 8.7 í…ŒìŠ¤íŠ¸ ë° QA ì²´í¬ë¦¬ìŠ¤íŠ¸

- `/`, `/forum/list`, `/auth/login`, `/menu`, `/admin`ì„ ê° localeë¡œ ì „í™˜í•˜ë©° ê²½ë¡œì™€ í…ìŠ¤íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- Locale ì „í™˜ ì‹œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê³¼ í•´ì‹œê°’ì´ ìœ ì§€ë˜ëŠ”ì§€, `router.replace`ê°€ ì˜ˆìƒëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.
- ìˆ«ìÂ·ë‚ ì§œ í¬ë§·ì´ localeë³„ ê¸°ëŒ€ê°’(ì˜ˆ: `â‚©49,900`, `2025ë…„ 10ì›” 31ì¼`, `2ì‹œê°„ ì „`)ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.
- ë¯¸ë“¤ì›¨ì–´ê°€ ì¸ì¦ ì—¬ë¶€ì™€ ë¬´ê´€í•˜ê²Œ ë™ì¼í•œ locale ì •ì±…ì„ ì ìš©í•˜ëŠ”ì§€, ë³´í˜¸ í˜ì´ì§€(`profile`, `chat/room`, `admin/*`)ê°€ ì˜¬ë°”ë¥´ê²Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- ë©”ì‹œì§€ ëˆ„ë½ ì‹œ fallback(`defaultTranslationValues`, ì˜ì–´ ê¸°ë³¸ ë©”ì‹œì§€)ì´ ë…¸ì¶œë˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ë¸Œë¼ìš°ì € ì½˜ì†”ì— ê²½ê³ ê°€ ì—†ëŠ”ì§€ ì ê²€í•©ë‹ˆë‹¤.

---

## Quick Reference

### í•µì‹¬ ì„¤ì •

- **ë¼ìš°íŒ… ì „ëµ**: `localePrefix: 'never'` (Cookie-based)
- **ë¡œì¼€ì¼ ê°ì§€ ìˆœì„œ**:
  1. NEXT_LOCALE ì¿ í‚¤ (ìµœìš°ì„ )
  2. Accept-Language í—¤ë”
  3. defaultLocale('ko') í´ë°±
- **URL í˜•ì‹**: í•­ìƒ ê³ ì • (ì˜ˆ: `/forum/list`, `/about-us`)

### ì£¼ìš” íŒŒì¼

| íŒŒì¼ | ì„¤ëª… | í•µì‹¬ ì„¤ì • |
|------|------|-----------|
| `i18n/routing.ts` | ë¼ìš°íŒ… ì„¤ì • | `localePrefix: 'never'` |
| `middleware.ts` | ìë™ ë¡œì¼€ì¼ ê°ì§€ | `createMiddleware(routing)` |
| `app/layout.tsx` | ë ˆì´ì•„ì›ƒ ì„¤ì • | `getLocale()`, `getMessages()` |
| `app/actions/set-locale.ts` | ì¿ í‚¤ ì„¤ì • ì„œë²„ ì•¡ì…˜ | `cookies().set('NEXT_LOCALE')` |
| `components/language-switcher.tsx` | ì–¸ì–´ ì „í™˜ UI | `setLocale()` í˜¸ì¶œ |
| `messages/{locale}.json` | ë²ˆì—­ íŒŒì¼ | JSON í˜•ì‹ |

### ë™ì‘ ë°©ì‹

**ì²« ë°©ë¬¸ ì‹œ:**
1. ë¯¸ë“¤ì›¨ì–´ê°€ Accept-Language ê°ì§€
2. í•´ë‹¹ ì–¸ì–´ì˜ ë©”ì‹œì§€ ë¡œë“œ
3. í˜ì´ì§€ ë Œë”ë§

**ì–¸ì–´ ì „í™˜ ì‹œ:**
1. ì‚¬ìš©ìê°€ ì–¸ì–´ ìŠ¤ìœ„ì²˜ì—ì„œ ì„ íƒ
2. ì„œë²„ ì•¡ì…˜ìœ¼ë¡œ NEXT_LOCALE ì¿ í‚¤ ì„¤ì •
3. `redirect()`ë¡œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
4. ë¯¸ë“¤ì›¨ì–´ê°€ ì¿ í‚¤ ì½ê³  ìƒˆ ì–¸ì–´ ì ìš©

**ì´í›„ ë°©ë¬¸ ì‹œ:**
1. ë¯¸ë“¤ì›¨ì–´ê°€ NEXT_LOCALE ì¿ í‚¤ í™•ì¸
2. ì €ì¥ëœ ì–¸ì–´ ì‚¬ìš©
3. ì‚¬ìš©ìê°€ ì„ íƒí•œ ì–¸ì–´ ìœ ì§€

### URL ì˜ˆì‹œ

| ì–¸ì–´ | URL | ì¿ í‚¤ | í‘œì‹œ |
|------|-----|------|------|
| í•œêµ­ì–´ | `/forum/list` | `NEXT_LOCALE=ko` | "í¬ëŸ¼", "ê¸€ì“°ê¸°" |
| ì˜ì–´ | `/forum/list` | `NEXT_LOCALE=en` | "Forum", "Write" |
| ì¼ë³¸ì–´ | `/forum/list` | `NEXT_LOCALE=ja` | "ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ", "æ›¸ã" |
| ì¤‘êµ­ì–´ | `/forum/list` | `NEXT_LOCALE=zh` | "è®ºå›", "å†™" |

### í•µì‹¬ í•¨ìˆ˜

**ë²ˆì—­:**
```typescript
// í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸
const t = useTranslations('namespace');
t('key')  // "ë²ˆì—­ëœ í…ìŠ¤íŠ¸"

// ì„œë²„ ì»´í¬ë„ŒíŠ¸
const t = await getTranslations('namespace');
t('key')  // "ë²ˆì—­ëœ í…ìŠ¤íŠ¸"
```

**í¬ë§·íŒ…:**
```typescript
const format = useFormatter();

// ìˆ«ì
format.number(49900, {style: 'currency', currency: 'KRW'})  // "â‚©49,900"

// ë‚ ì§œ
format.dateTime(new Date(), {year: 'numeric', month: 'short', day: 'numeric'})

// ìƒëŒ€ ì‹œê°„
const now = useNow();
format.relativeTime(pastDate, now)  // "2ì‹œê°„ ì „"

// ë¦¬ìŠ¤íŠ¸
format.list(['A', 'B', 'C'], {type: 'conjunction'})  // "A, B ë° C"
```

**ì–¸ì–´ ì „í™˜:**
```typescript
import {setLocale} from '@/app/actions/set-locale';

// í˜„ì¬ í˜ì´ì§€ ìœ ì§€í•˜ë©´ì„œ ì–¸ì–´ ì „í™˜
const currentPath = window.location.pathname + window.location.search + window.location.hash;
await setLocale('en', currentPath);
```

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**ì¿ í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì„ ë•Œ:**
1. ì„œë²„ ì•¡ì…˜(`app/actions/set-locale.ts`) ì‚¬ìš© í™•ì¸
2. `redirect()` í˜¸ì¶œ í™•ì¸
3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Application â†’ Cookiesì—ì„œ NEXT_LOCALE í™•ì¸

**ë²ˆì—­ì´ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ:**
1. `messages/{locale}.json` íŒŒì¼ ì¡´ì¬ í™•ì¸
2. JSON íŒŒì¼ í˜•ì‹ ì˜¤ë¥˜ í™•ì¸
3. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ í‚¤ ê²½ë¡œ í™•ì¸ (ì˜ˆ: `t('forum.title')`)

**ë¯¸ë“¤ì›¨ì–´ê°€ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ:**
1. `middleware.ts` íŒŒì¼ì´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸
2. `matcher` ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
3. `i18n/routing.ts` import ê²½ë¡œ í™•ì¸

### ì£¼ì˜ì‚¬í•­

- âœ… **ì„œë²„ ì•¡ì…˜ ì‚¬ìš©**: ì¿ í‚¤ ì„¤ì • ì‹œ ë°˜ë“œì‹œ ì„œë²„ ì•¡ì…˜ ì‚¬ìš©
- âœ… **UTF-8 ì¸ì½”ë”©**: ëª¨ë“  ë²ˆì—­ íŒŒì¼ UTF-8ë¡œ ì €ì¥
- âœ… **í•˜ë“œì½”ë”© ê¸ˆì§€**: ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” ë²ˆì—­ íŒŒì¼ë¡œ ê´€ë¦¬
- âŒ **`document.cookie` ì§ì ‘ ì¡°ì‘ ê¸ˆì§€**: ì—£ì§€ í™˜ê²½ì—ì„œ ëˆ„ë½ ìœ„í—˜
- âŒ **URLì— locale í¬í•¨ ê¸ˆì§€**: `localePrefix: 'never'` ì‚¬ìš©

---

---

## 12. ë³¸ í”„ë¡œì íŠ¸ ì‹¤ì œ êµ¬í˜„ ë‚´ì—­

### 12.1 êµ¬í˜„ ê°œìš”

**2025ë…„ 10ì›” 31ì¼ ê¸°ì¤€ - Vibe í”„ë¡œì íŠ¸ ë‹¤êµ­ì–´ êµ¬í˜„ ì™„ë£Œ**

ë³¸ í”„ë¡œì íŠ¸ëŠ” Next-Intl 4.4.0ì„ ì‚¬ìš©í•˜ì—¬ Cookie-based ë‹¤êµ­ì–´ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. URLì— ë¡œì¼€ì¼ ì ‘ë‘ì‚¬ ì—†ì´(`localePrefix: 'never'`) ì¿ í‚¤ë§Œìœ¼ë¡œ ì–¸ì–´ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•:**
- âœ… **app/[locale] í´ë” êµ¬ì¡° ì‚¬ìš© ì•ˆ í•¨** - localePrefix: 'never' ì „ëµì— ë§ì¶° ê¸°ì¡´ í´ë” êµ¬ì¡° ìœ ì§€
- âœ… **ìˆ˜ë™ locale ê°ì§€** - i18n/request.tsì™€ app/layout.tsxì—ì„œ cookiesì™€ headers ì§ì ‘ ì½ê¸°
- âœ… **Next.js 16 í˜¸í™˜** - `await cookies()` API ì‚¬ìš©
- âœ… **4ê°œ ì–¸ì–´ ì§€ì›** - ì˜ì–´(en), í•œêµ­ì–´(ko), ì¤‘êµ­ì–´(zh), ì¼ë³¸ì–´(ja)
- âœ… **ì–¸ì–´ ì „í™˜ UI** - Left Sidebarì™€ Menu í˜ì´ì§€ì— ì–¸ì–´ ìŠ¤ìœ„ì²˜ ë°°ì¹˜

### 12.2 êµ¬í˜„ëœ íŒŒì¼ êµ¬ì¡°

```
vibe/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ request.ts              # â­ ìˆ˜ë™ locale ê°ì§€ (ì¿ í‚¤ + Accept-Language)
â”‚   â””â”€â”€ routing.ts              # localePrefix: 'never' ì„¤ì •
â”œâ”€â”€ middleware.ts               # â­ ê°„ì†Œí™”ëœ ë¯¸ë“¤ì›¨ì–´ (ì§ì ‘ export)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # â­ ìˆ˜ë™ locale ê°ì§€ ë° NextIntlClientProvider
â”‚   â”œâ”€â”€ app.config.ts           # LOCALES, DEFAULT_LOCALE, LOCALE_INFO
â”‚   â””â”€â”€ actions/
â”‚       â””â”€â”€ set-locale.ts       # â­ Next.js 16 í˜¸í™˜ ì¿ í‚¤ ì„¤ì •
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ language-switcher.tsx   # ì–¸ì–´ ì „í™˜ ë“œë¡­ë‹¤ìš´
â”‚   â””â”€â”€ left-sidebar.tsx        # ì–¸ì–´ ìŠ¤ìœ„ì²˜ í¬í•¨
â”œâ”€â”€ messages/
â”‚   â”œâ”€â”€ en.json                 # ì˜ì–´ ë²ˆì—­ (~100 í‚¤)
â”‚   â”œâ”€â”€ ko.json                 # í•œêµ­ì–´ ë²ˆì—­
â”‚   â”œâ”€â”€ zh.json                 # ì¤‘êµ­ì–´ ë²ˆì—­
â”‚   â””â”€â”€ ja.json                 # ì¼ë³¸ì–´ ë²ˆì—­
â””â”€â”€ next.config.ts              # createNextIntlPlugin í•„ìˆ˜ ì ìš©
```

### 12.3 í•µì‹¬ êµ¬í˜„ ì½”ë“œ

#### i18n/request.ts (ìˆ˜ë™ locale ê°ì§€)

**âš ï¸ ì¤‘ìš”**: ì´ íŒŒì¼ì´ ì „ì²´ ì‹œìŠ¤í…œì˜ í•µì‹¬ì…ë‹ˆë‹¤. localePrefix: 'never'ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” `locale` íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì§ì ‘ ì¿ í‚¤ì™€ í—¤ë”ë¥¼ ì½ì–´ì•¼ í•©ë‹ˆë‹¤.

```typescript
import {getRequestConfig} from 'next-intl/server';
import {cookies, headers} from 'next/headers';
import {DEFAULT_LOCALE, LOCALES} from '@/app/app.config';

// Next-Intl ìš”ì²­ ì„¤ì •
// i18n routing ì—†ì´ ì¿ í‚¤ ê¸°ë°˜ìœ¼ë¡œ localeì„ ê²°ì •í•©ë‹ˆë‹¤
export default getRequestConfig(async () => {
  // ì¿ í‚¤ì—ì„œ locale ì½ê¸° (Next.js 16+: await í•„ìš”)
  const cookieStore = await cookies();
  let locale = cookieStore.get('NEXT_LOCALE')?.value;

  // ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ Accept-Language í—¤ë”ì—ì„œ ì½ê¸°
  if (!locale) {
    const headersList = await headers();
    const acceptLanguage = headersList.get('accept-language');

    if (acceptLanguage) {
      // Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
      // ì²« ë²ˆì§¸ ì–¸ì–´ ì½”ë“œ ì¶”ì¶œ
      const preferredLocale = acceptLanguage.split(',')[0].split('-')[0];

      // ì§€ì›í•˜ëŠ” ì–¸ì–´ì¸ì§€ í™•ì¸
      if (LOCALES.includes(preferredLocale as any)) {
        locale = preferredLocale;
      }
    }
  }

  // ì—¬ì „íˆ localeì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
  const safeLocale = locale || DEFAULT_LOCALE;

  return {
    locale: safeLocale,
    messages: (await import(`../messages/${safeLocale}.json`)).default
  };
});
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âŒ `async ({locale})` íŒŒë¼ë¯¸í„° ì‚¬ìš© ì•ˆ í•¨ (undefinedê°€ ë¨)
- âœ… `await cookies()` ì§ì ‘ í˜¸ì¶œ (Next.js 16)
- âœ… `await headers()` ì§ì ‘ í˜¸ì¶œ
- âœ… `locale` í•„ë“œë¥¼ ë°˜í™˜ ê°ì²´ì— í¬í•¨

#### middleware.ts (ê°„ì†Œí™”ëœ ë¯¸ë“¤ì›¨ì–´)

```typescript
import createMiddleware from 'next-intl/middleware';
import {routing} from './i18n/routing';

export default createMiddleware(routing);

export const config = {
  matcher: ['/((?!api|_next|_vercel|.*\\..*).*)']
};
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… ë³µì¡í•œ async ë˜í¼ ì—†ì´ ì§ì ‘ export
- âœ… routing ê°ì²´ë§Œ ì „ë‹¬
- âœ… ì •ì  íŒŒì¼/API ì œì™¸í•˜ëŠ” matcher ì„¤ì •

#### i18n/routing.ts (localePrefix: 'never')

```typescript
import {defineRouting} from 'next-intl/routing';
import {LOCALES, DEFAULT_LOCALE} from '@/app/app.config';

export const routing = defineRouting({
  locales: LOCALES,
  defaultLocale: DEFAULT_LOCALE,
  localePrefix: 'never'  // â­ í•µì‹¬: URLì— ë¡œì¼€ì¼ ì ‘ë‘ì–´ ì ˆëŒ€ ì•ˆ ë¶™ì„
});
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… `localePrefix: 'never'` - URLì€ í•­ìƒ `/forum/list` í˜•íƒœ
- âœ… ì¿ í‚¤ê°€ ë¡œì¼€ì¼ì˜ ë‹¨ì¼ ì†ŒìŠ¤ê°€ ë¨

#### app/layout.tsx (ìˆ˜ë™ locale ê°ì§€)

```typescript
import { NextIntlClientProvider } from 'next-intl';
import { getMessages } from 'next-intl/server';
import { cookies, headers } from 'next/headers';
import { LOCALES, DEFAULT_LOCALE, type Locale } from "./app.config";

export default async function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  // â­ i18n/request.tsì™€ ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ locale ê°ì§€
  const cookieStore = await cookies();
  let locale = cookieStore.get('NEXT_LOCALE')?.value as Locale;

  // ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ Accept-Language í—¤ë”ì—ì„œ ì½ê¸°
  if (!locale) {
    const headersList = await headers();
    const acceptLanguage = headersList.get('accept-language');

    if (acceptLanguage) {
      const preferredLocale = acceptLanguage.split(',')[0].split('-')[0];
      if (LOCALES.includes(preferredLocale as any)) {
        locale = preferredLocale as Locale;
      }
    }
  }

  // ì—¬ì „íˆ localeì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
  const safeLocale = locale || DEFAULT_LOCALE;

  // i18n/request.tsì—ì„œ ì œê³µí•˜ëŠ” messages ê°€ì ¸ì˜¤ê¸°
  const messages = await getMessages();

  return (
    <html lang={safeLocale}>
      <body>
        {/* Next-Intl Provider: ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë²ˆì—­ ì‚¬ìš© ê°€ëŠ¥ */}
        <NextIntlClientProvider locale={safeLocale} messages={messages}>
          {children}
        </NextIntlClientProvider>
      </body>
    </html>
  );
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… i18n/request.tsì™€ ë™ì¼í•œ locale ê°ì§€ ë¡œì§ ì‚¬ìš©
- âœ… `getMessages()` ì‚¬ìš© (i18n/request.tsì—ì„œ ì •ì˜í•œ ë°©ì‹)
- âœ… localeê³¼ messagesë¥¼ NextIntlClientProviderì— ì „ë‹¬

#### app/actions/set-locale.ts (Next.js 16 í˜¸í™˜)

```typescript
'use server';

import {cookies} from 'next/headers';
import {redirect} from 'next/navigation';

// ì„œë²„ ì•¡ì…˜: ì‚¬ìš©ìê°€ ì„ íƒí•œ ì–¸ì–´ë¥¼ ì¿ í‚¤ì— ì €ì¥
// ì´ í•¨ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ í˜¸ì¶œë˜ì–´ ì–¸ì–´ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤
//
// @param locale - ë³€ê²½í•  ì–¸ì–´ ì½”ë“œ ('en', 'ko', 'zh', 'ja')
// @param redirectTo - ë¦¬ë‹¤ì´ë ‰íŠ¸í•  ê²½ë¡œ (í˜„ì¬ í˜ì´ì§€ ê²½ë¡œ)
export async function setLocale(locale: string, redirectTo: string) {
  // NEXT_LOCALE ì¿ í‚¤ì— ì„ íƒí•œ ì–¸ì–´ ì €ì¥
  // â­ Next.js 16+: cookies()ëŠ” Promiseë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ await í•„ìš”
  const cookieStore = await cookies();
  cookieStore.set('NEXT_LOCALE', locale, {
    path: '/',                      // ëª¨ë“  ê²½ë¡œì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
    maxAge: 60 * 60 * 24 * 365,     // 1ë…„ê°„ ìœ ì§€
    sameSite: 'lax',                // CSRF ë³´í˜¸
    secure: process.env.NODE_ENV === 'production'  // í”„ë¡œë•ì…˜ì—ì„œëŠ” HTTPSë§Œ
  });

  // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë³€ê²½ëœ ì–¸ì–´ ì ìš©
  // redirect()ë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë²„ì—ì„œ ìƒˆë¡œìš´ ì–¸ì–´ë¡œ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•©ë‹ˆë‹¤
  redirect(redirectTo);
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… `await cookies()` ì‚¬ìš© (Next.js 16 í•„ìˆ˜)
- âœ… `redirect()` í˜¸ì¶œë¡œ ìƒˆë¡œê³ ì¹¨
- âœ… ì¿ í‚¤ ì˜µì…˜: path, maxAge, sameSite, secure

#### components/language-switcher.tsx (ì–¸ì–´ ì „í™˜ UI)

```typescript
'use client';

import {useTransition} from 'react';
import {useLocale} from 'next-intl';
import {setLocale} from '@/app/actions/set-locale';
import {LOCALES, LOCALE_INFO, type Locale} from '@/app/app.config';

export function LanguageSwitcher() {
  const currentLocale = useLocale() as Locale;
  const [isPending, startTransition] = useTransition();

  const handleChange = (event: React.ChangeEvent<HTMLSelectElement>) => {
    const nextLocale = event.target.value as Locale;

    // ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê³¼ í•´ì‹œê¹Œì§€ í¬í•¨í•´ í˜„ì¬ í˜ì´ì§€ ìœ ì§€
    const currentPath = window.location.pathname +
                       window.location.search +
                       window.location.hash;

    // Transitionìœ¼ë¡œ ê°ì‹¸ì„œ ë¶€ë“œëŸ¬ìš´ ì „í™˜
    startTransition(() => {
      setLocale(nextLocale, currentPath);
    });
  };

  return (
    <select
      value={currentLocale}
      onChange={handleChange}
      disabled={isPending}
      className="w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-400"
    >
      {LOCALES.map((locale) => (
        <option key={locale} value={locale}>
          {LOCALE_INFO[locale].flag} {LOCALE_INFO[locale].name}
        </option>
      ))}
    </select>
  );
}
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… `useLocale()` Hookìœ¼ë¡œ í˜„ì¬ ì–¸ì–´ ê°ì§€
- âœ… `startTransition()` ì‚¬ìš©ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ ì „í™˜
- âœ… ì¿¼ë¦¬ìŠ¤íŠ¸ë§ê³¼ í•´ì‹œ ìœ ì§€
- âœ… `isPending` ìƒíƒœë¡œ ë¡œë”© í‘œì‹œ

#### app/app.config.ts (ì–¸ì–´ ì„¤ì •)

```typescript
// ì§€ì›í•˜ëŠ” ë¡œì¼€ì¼ ëª©ë¡ (ì˜ì–´, í•œêµ­ì–´, ì¤‘êµ­ì–´, ì¼ë³¸ì–´)
export const LOCALES = ['en', 'ko', 'zh', 'ja'] as const;
export type Locale = typeof LOCALES[number];

// ê¸°ë³¸ ë¡œì¼€ì¼ (í•œêµ­ì–´)
export const DEFAULT_LOCALE: Locale = 'ko';

// ë¡œì¼€ì¼ ì •ë³´ (êµ­ê¸°, ì´ë¦„)
export const LOCALE_INFO: Record<Locale, { flag: string; name: string }> = {
  en: { flag: 'ğŸ‡ºğŸ‡¸', name: 'English' },
  ko: { flag: 'ğŸ‡°ğŸ‡·', name: 'í•œêµ­ì–´' },
  zh: { flag: 'ğŸ‡¨ğŸ‡³', name: 'ä¸­æ–‡' },
  ja: { flag: 'ğŸ‡¯ğŸ‡µ', name: 'æ—¥æœ¬èª' },
};
```

### 12.4 ë²ˆì—­ íŒŒì¼ êµ¬ì¡°

**messages/ko.json** (ì•½ 100ê°œ í‚¤):
```json
{
  "navigation": {
    "home": "í™ˆ",
    "forum": "í¬ëŸ¼",
    "chat": "ì±„íŒ…",
    "users": "ì‚¬ìš©ì",
    "menu": "ë©”ë‰´"
  },
  "auth": {
    "login": "ë¡œê·¸ì¸",
    "logout": "ë¡œê·¸ì•„ì›ƒ",
    "signup": "íšŒì›ê°€ì…",
    "email": "ì´ë©”ì¼",
    "password": "ë¹„ë°€ë²ˆí˜¸"
  },
  "buttons": {
    "save": "ì €ì¥",
    "cancel": "ì·¨ì†Œ",
    "delete": "ì‚­ì œ",
    "edit": "ìˆ˜ì •",
    "submit": "ì œì¶œ"
  },
  // ... ë” ë§ì€ ì„¹ì…˜
}
```

**messages/en.json** (ë™ì¼í•œ í‚¤ êµ¬ì¡°):
```json
{
  "navigation": {
    "home": "Home",
    "forum": "Forum",
    "chat": "Chat",
    "users": "Users",
    "menu": "Menu"
  },
  "auth": {
    "login": "Log in",
    "logout": "Log out",
    "signup": "Sign up",
    "email": "Email",
    "password": "Password"
  },
  // ... ë™ì¼í•œ êµ¬ì¡°
}
```

**ë²ˆì—­ íŒŒì¼ ì„¹ì…˜:**
- `navigation` - ë‚´ë¹„ê²Œì´ì…˜ ë©”ë‰´
- `auth` - ì¸ì¦ ê´€ë ¨
- `buttons` - ê³µí†µ ë²„íŠ¼
- `common` - ê³µí†µ ë¬¸êµ¬
- `sidebar` - ì‚¬ì´ë“œë°”
- `menu` - ë©”ë‰´ í˜ì´ì§€
- `forum` - ê²Œì‹œíŒ
- `chat` - ì±„íŒ…
- `users` - ì‚¬ìš©ì ëª©ë¡
- `profile` - í”„ë¡œí•„
- `stats` - í†µê³„
- `home` - í™ˆí˜ì´ì§€

### 12.5 ì–¸ì–´ ì „í™˜ íë¦„

```
ì‚¬ìš©ìê°€ ì–¸ì–´ ìŠ¤ìœ„ì²˜ì—ì„œ 'English' ì„ íƒ
  â†“
[í´ë¼ì´ì–¸íŠ¸]
LanguageSwitcherì˜ handleChange ì´ë²¤íŠ¸ ë°œìƒ
  â†“
setLocale('en', '/current/path') ì„œë²„ ì•¡ì…˜ í˜¸ì¶œ
  â†“
[ì„œë²„]
const cookieStore = await cookies();
cookieStore.set('NEXT_LOCALE', 'en', {...});
  â†“
redirect('/current/path')
  â†“
[ë¯¸ë“¤ì›¨ì–´ ì¬ì‹¤í–‰]
createMiddleware(routing) ì‹¤í–‰
  â†“
[i18n/request.ts ì‹¤í–‰]
const cookieStore = await cookies();
locale = cookieStore.get('NEXT_LOCALE')?.value;  // 'en'
  â†“
messages/en.json ë¡œë“œ
  â†“
[app/layout.tsx ì‹¤í–‰]
ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ locale = 'en' ê°ì§€
  â†“
<NextIntlClientProvider locale="en" messages={...}>
  â†“
[í˜ì´ì§€ ë Œë”ë§]
ëª¨ë“  t('key') í˜¸ì¶œì´ ì˜ì–´ ë²ˆì—­ìœ¼ë¡œ í‘œì‹œ
```

### 12.6 ì£¼ìš” í•´ê²° ë¬¸ì œ

#### ë¬¸ì œ 1: 404 ì˜¤ë¥˜ (í•´ê²°ë¨)
**ì¦ìƒ:** ëª¨ë“  í˜ì´ì§€ì—ì„œ 404 Not Found ë°œìƒ
**ì›ì¸:** app/[locale] í´ë” êµ¬ì¡°ë¥¼ ë§Œë“¤ë ¤ í–ˆìœ¼ë‚˜ localePrefix: 'never'ì™€ ì¶©ëŒ
**í•´ê²°:** app/[locale] í´ë” êµ¬ì¡° ì œê±°, ìˆ˜ë™ locale ê°ì§€ë¡œ ë³€ê²½

#### ë¬¸ì œ 2: "locale undefined" ì˜¤ë¥˜ (í•´ê²°ë¨)
**ì¦ìƒ:** `Cannot find module '../messages/undefined.json'`
**ì›ì¸:** i18n/request.tsì—ì„œ locale íŒŒë¼ë¯¸í„°ê°€ undefined
**í•´ê²°:** íŒŒë¼ë¯¸í„° ëŒ€ì‹  cookies()ì™€ headers()ì—ì„œ ì§ì ‘ ì½ê¸°

#### ë¬¸ì œ 3: Next.js 16 cookies() API (í•´ê²°ë¨)
**ì¦ìƒ:** `cookies().set is not a function`
**ì›ì¸:** Next.js 16ì—ì„œ cookies()ê°€ Promise ë°˜í™˜
**í•´ê²°:** `const cookieStore = await cookies();` ì‚¬ìš©

#### ë¬¸ì œ 4: next.config.ts í”ŒëŸ¬ê·¸ì¸ ì œê±° ì‹œë„ (í•´ê²°ë¨)
**ì¦ìƒ:** `Couldn't find next-intl config file`
**ì›ì¸:** createNextIntlPluginì´ í•„ìš” ì—†ë‹¤ê³  íŒë‹¨
**í•´ê²°:** í”ŒëŸ¬ê·¸ì¸ì€ localePrefix: 'never'ì—ì„œë„ í•„ìˆ˜ (ë³µì›í•¨)

### 12.7 ê²€ì¦ ì™„ë£Œ ì‚¬í•­

- âœ… í™ˆí˜ì´ì§€ ë¡œë”© ì„±ê³µ (200 OK)
- âœ… ì–¸ì–´ ìŠ¤ìœ„ì²˜ ë™ì‘ (Left Sidebar, Menu í˜ì´ì§€)
- âœ… ì¿ í‚¤ ì„¤ì • í™•ì¸ (NEXT_LOCALE)
- âœ… 4ê°œ ì–¸ì–´ ë²ˆì—­ íŒŒì¼ ìƒì„±
- âœ… UTF-8 ì¸ì½”ë”© ê²€ì¦ ì™„ë£Œ

### 12.8 ë‚¨ì€ ì‘ì—…

ë‹¤ìŒ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤:

1. **ëª¨ë“  í˜ì´ì§€ì— ë²ˆì—­ ì ìš©**
   - í˜„ì¬ ëŒ€ë¶€ë¶„ì˜ í˜ì´ì§€ê°€ í•˜ë“œì½”ë”©ëœ í•œêµ­ì–´ í…ìŠ¤íŠ¸ ì‚¬ìš©
   - `useTranslations()` Hookìœ¼ë¡œ ë³€í™˜ í•„ìš”

2. **ë²ˆì—­ íŒŒì¼ í™•ì¥**
   - í˜„ì¬ ì•½ 100ê°œ í‚¤ ì¡´ì¬
   - ëª¨ë“  í˜ì´ì§€ì˜ í…ìŠ¤íŠ¸ë¥¼ ë²ˆì—­ íŒŒì¼ë¡œ ì´ë™

3. **E2E í…ŒìŠ¤íŠ¸**
   - ê° ì–¸ì–´ë¡œ ëª¨ë“  í˜ì´ì§€ ì ‘ì† í…ŒìŠ¤íŠ¸
   - ì–¸ì–´ ì „í™˜ í›„ ë™ì‘ í™•ì¸

### 12.9 ì¤‘ìš” ì°¸ê³  ì‚¬í•­

**âš ï¸ localePrefix: 'never' ì‚¬ìš© ì‹œ í•„ìˆ˜ ê·œì¹™:**

1. **app/[locale] í´ë” êµ¬ì¡° ì‚¬ìš© ê¸ˆì§€**
   - ê¸°ì¡´ í´ë” êµ¬ì¡° ìœ ì§€ (app/forum/list/page.tsx)
   - âŒ app/[locale]/forum/list/page.tsx í˜•íƒœë¡œ ë³€ê²½ ê¸ˆì§€

2. **i18n/request.tsì—ì„œ ìˆ˜ë™ locale ê°ì§€**
   - `async ({locale})` íŒŒë¼ë¯¸í„° ì‚¬ìš© ì•ˆ í•¨
   - `await cookies()`, `await headers()` ì§ì ‘ í˜¸ì¶œ

3. **app/layout.tsxì—ì„œ ìˆ˜ë™ locale ê°ì§€**
   - i18n/request.tsì™€ ë™ì¼í•œ ë¡œì§ ì‚¬ìš©
   - `getMessages()` ì‚¬ìš©

4. **Next.js 16 í˜¸í™˜**
   - ëª¨ë“  `cookies()` í˜¸ì¶œ ì „ì— `await` ì‚¬ìš©

5. **createNextIntlPlugin í•„ìˆ˜**
   - localePrefix: 'never'ì—ì„œë„ next.config.ts í”ŒëŸ¬ê·¸ì¸ í•„ìš”

### 12.10 ì°¸ê³  ë§í¬

- [ë³¸ í”„ë¡œì íŠ¸ i18n/request.ts](../i18n/request.ts)
- [ë³¸ í”„ë¡œì íŠ¸ middleware.ts](../middleware.ts)
- [ë³¸ í”„ë¡œì íŠ¸ app/layout.tsx](../app/layout.tsx)
- [ë³¸ í”„ë¡œì íŠ¸ app/actions/set-locale.ts](../app/actions/set-locale.ts)
- [ë³¸ í”„ë¡œì íŠ¸ components/language-switcher.tsx](../components/language-switcher.tsx)
- [Next-Intl localePrefix ë¬¸ì„œ](https://next-intl.dev/docs/routing/configuration#locale-prefix)

---

## ì°¸ê³  ìë£Œ

- [Next-Intl ê³µì‹ ë¬¸ì„œ](https://next-intl.dev/)
- [Next-Intl GitHub](https://github.com/amannn/next-intl)
- [MDN Intl API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)
- [Unicode CLDR](http://cldr.unicode.org/) - ì–¸ì–´ë³„ ë³µìˆ˜í˜• ê·œì¹™
